<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:h="http://helix-toolkit.org/wpf"
    xmlns:hx="clr-namespace:HelixToolkit.Wpf.SharpDX">

    <BooleanToVisibilityConverter x:Key="BoolToVisibilityConverter" />
    <h:NotNullToVisibilityConverter x:Key="NotNullToVisibilityConverter" />

    <Style TargetType="{x:Type hx:Viewport3DX}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type hx:Viewport3DX}">
                    <Border
                        Background="{TemplateBinding Background}"
                        BorderBrush="{TemplateBinding BorderBrush}"
                        BorderThickness="{TemplateBinding BorderThickness}">
                        <Grid FocusVisualStyle="{x:Null}">

                            <hx:CameraController
                                x:Name="PART_CameraController"
                                CameraMode="{TemplateBinding CameraMode}"
                                CameraRotationMode="{TemplateBinding CameraRotationMode}"
                                ChangeFieldOfViewCursor="{TemplateBinding ChangeFieldOfViewCursor}"
                                DefaultCamera="{TemplateBinding DefaultCamera}"
                                InertiaFactor="{TemplateBinding CameraInertiaFactor}"
                                InfiniteSpin="{TemplateBinding InfiniteSpin}"
                                IsChangeFieldOfViewEnabled="{TemplateBinding IsChangeFieldOfViewEnabled}"
                                IsInertiaEnabled="{TemplateBinding IsInertiaEnabled}"
                                IsMoveEnabled="{TemplateBinding IsMoveEnabled}"
                                IsPanEnabled="{TemplateBinding IsPanEnabled}"
                                IsRotationEnabled="{TemplateBinding IsRotationEnabled}"
                                IsTouchZoomEnabled="{TemplateBinding IsTouchZoomEnabled}"
                                IsZoomEnabled="{TemplateBinding IsZoomEnabled}"
                                LeftRightPanSensitivity="{TemplateBinding LeftRightPanSensitivity}"
                                LeftRightRotationSensitivity="{TemplateBinding LeftRightRotationSensitivity}"
                                MaximumFieldOfView="{TemplateBinding MaximumFieldOfView}"
                                MinimumFieldOfView="{TemplateBinding MinimumFieldOfView}"
                                ModelUpDirection="{TemplateBinding ModelUpDirection}"
                                PageUpDownZoomSensitivity="{TemplateBinding PageUpDownZoomSensitivity}"
                                PanCursor="{TemplateBinding PanCursor}"
                                RotateAroundMouseDownPoint="{TemplateBinding RotateAroundMouseDownPoint}"
                                RotateCursor="{TemplateBinding RotateCursor}"
                                RotationSensitivity="{TemplateBinding RotationSensitivity}"
                                ShowCameraTarget="{TemplateBinding ShowCameraTarget}"
                                UpDownPanSensitivity="{TemplateBinding UpDownPanSensitivity}"
                                UpDownRotationSensitivity="{TemplateBinding UpDownRotationSensitivity}"
                                ZoomAroundMouseDownPoint="{TemplateBinding ZoomAroundMouseDownPoint}"
                                ZoomCursor="{TemplateBinding ZoomCursor}"
                                ZoomRectangleCursor="{TemplateBinding ZoomRectangleCursor}"
                                ZoomSensitivity="{TemplateBinding ZoomSensitivity}">
                                <!-- ToDo: hx:CameraController.InputBindings?
                                <hx:CameraController.InputBindings>
                                    <h:InputBinding />
                                </hx:CameraController.InputBindings>
                                -->
                                <ContentPresenter
                                    x:Name="PART_Canvas"
                                    HorizontalAlignment="Stretch"
                                    VerticalAlignment="Stretch"
                                    DataContext="{TemplateBinding DataContext}" />
                            </hx:CameraController>

                            <Grid IsHitTestVisible="False">

                                <!--  Titles  -->

                                <StackPanel
                                    Margin="5"
                                    HorizontalAlignment="Left"
                                    VerticalAlignment="Top"
                                    Background="{TemplateBinding TitleBackground}">
                                    <TextBlock
                                        FontFamily="{TemplateBinding TitleFontFamily}"
                                        FontSize="{TemplateBinding TitleSize}"
                                        FontWeight="Bold"
                                        Foreground="{TemplateBinding TextBrush}"
                                        Text="{TemplateBinding Title}"
                                        Visibility="{TemplateBinding Title,
                                                                     Converter={StaticResource NotNullToVisibilityConverter}}" />
                                    <TextBlock
                                        FontFamily="{TemplateBinding TitleFontFamily}"
                                        FontSize="{TemplateBinding SubTitleSize}"
                                        Foreground="{TemplateBinding TextBrush}"
                                        Text="{TemplateBinding SubTitle}"
                                        Visibility="{TemplateBinding SubTitle,
                                                                     Converter={StaticResource NotNullToVisibilityConverter}}" />
                                </StackPanel>

                                <StackPanel
                                    Margin="6"
                                    HorizontalAlignment="Right"
                                    VerticalAlignment="Top"
                                    Background="{TemplateBinding InfoBackground}">
                                    <TextBlock
                                        Padding="4"
                                        HorizontalAlignment="Right"
                                        Foreground="{TemplateBinding InfoForeground}"
                                        Text="{TemplateBinding FrameRateText}"
                                        Visibility="{TemplateBinding ShowFrameRate,
                                                                     Converter={StaticResource BoolToVisibilityConverter}}" />
                                    <TextBlock
                                        Padding="4"
                                        HorizontalAlignment="Right"
                                        Foreground="{TemplateBinding InfoForeground}"
                                        Text="{TemplateBinding FieldOfViewText}"
                                        Visibility="{TemplateBinding ShowFieldOfView,
                                                                     Converter={StaticResource BoolToVisibilityConverter}}" />
                                    <TextBlock
                                        HorizontalAlignment="Right"
                                        Foreground="{TemplateBinding InfoForeground}"
                                        Text="{TemplateBinding Status}"
                                        Visibility="{TemplateBinding Status,
                                                                     Converter={StaticResource NotNullToVisibilityConverter}}" />
                                </StackPanel>

                                <StackPanel
                                    Margin="6"
                                    HorizontalAlignment="Left"
                                    VerticalAlignment="Bottom"
                                    Background="{TemplateBinding InfoBackground}">
                                    <TextBlock
                                        Padding="4"
                                        Foreground="{TemplateBinding InfoForeground}"
                                        Text="{TemplateBinding CameraInfo}"
                                        Visibility="{TemplateBinding ShowCameraInfo,
                                                                     Converter={StaticResource BoolToVisibilityConverter}}" />
                                    <TextBlock
                                        Padding="4"
                                        Foreground="{TemplateBinding InfoForeground}"
                                        Text="{TemplateBinding TriangleCountInfo}"
                                        Visibility="{TemplateBinding ShowTriangleCountInfo,
                                                                     Converter={StaticResource BoolToVisibilityConverter}}" />
                                    <TextBlock
                                        Foreground="{TemplateBinding InfoForeground}"
                                        Text="{TemplateBinding DebugInfo}"
                                        Visibility="{TemplateBinding DebugInfo,
                                                                     Converter={StaticResource NotNullToVisibilityConverter}}" />
                                </StackPanel>
                            </Grid>
                            <ItemsControl Visibility="Collapsed">
                                <hx:ViewBoxModel3D
                                    x:Name="PART_ViewCube"
                                    IsRendering="{TemplateBinding ShowViewCube}"
                                    RelativeScreenLocationX="{TemplateBinding ViewCubeHorizontalPosition}"
                                    RelativeScreenLocationY="{TemplateBinding ViewCubeVerticalPosition}"
                                    SizeScale="{TemplateBinding ViewCubeSize}"
                                    ViewBoxTexture="{TemplateBinding ViewCubeTexture}" />
                                <hx:CoordinateSystemModel3D
                                    x:Name="PART_CoordinateView"
                                    CoordinateSystemLabelX="{TemplateBinding CoordinateSystemLabelX}"
                                    CoordinateSystemLabelY="{TemplateBinding CoordinateSystemLabelY}"
                                    CoordinateSystemLabelZ="{TemplateBinding CoordinateSystemLabelZ}"
                                    IsRendering="{TemplateBinding ShowCoordinateSystem}"
                                    LabelColor="{TemplateBinding CoordinateSystemLabelForeground}"
                                    RelativeScreenLocationX="{TemplateBinding CoordinateSystemHorizontalPosition}"
                                    RelativeScreenLocationY="{TemplateBinding CoordinateSystemVerticalPosition}"
                                    SizeScale="{TemplateBinding CoordinateSystemSize}" />
                            </ItemsControl>

                            <!--  Message TextBox  -->
                            <TextBox
                                Margin="6"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                Background="{TemplateBinding InfoBackground}"
                                BorderBrush="Tomato"
                                BorderThickness="2"
                                HorizontalScrollBarVisibility="Disabled"
                                IsReadOnly="True"
                                Text="{TemplateBinding MessageText}"
                                TextWrapping="Wrap"
                                VerticalScrollBarVisibility="Hidden"
                                Visibility="{TemplateBinding MessageText,
                                                             Converter={StaticResource NotNullToVisibilityConverter}}" />
                        </Grid>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</ResourceDictionary>
